<link rel="stylesheet" href="../../assets/css/components/buttons.css">
<link rel="stylesheet" href="../../assets/css/components/forms.css">
<link rel="stylesheet" href="../../assets/css/components/tables.css">
<link rel="stylesheet" href="../../assets/css/views/gastos.css">
<section class="gastos-form">
  <h2>Registrar Gasto</h2>

  <form id="form-registrar-gasto">
    <label for="descripcion">Descripción:</label>
    <input type="text" id="descripcion" name="descripcion" required />

    <label for="categoria">Categoría:</label>
    <input type="text" id="categoria" name="categoria" required />

    <label for="monto">Monto:</label>
    <input type="number" id="monto" name="monto" required step="0.01" min="0" />

    <label for="fecha">Fecha:</label>
    <input type="date" id="fecha" name="fecha" required />

    <button type="submit" class="btn-primary">Guardar</button>
  </form>
</section>

<script type="module">
  import { registrarGasto } from '../../assets/js/api/gastos.js';
  import { showNotification } from '../../assets/js/components/notifications.js';

  const form = document.getElementById('form-registrar-gasto');

  form.addEventListener('submit', async (e) => {
    e.preventDefault();

    const gasto = {
      descripcion: form.descripcion.value,
      categoria: form.categoria.value,
      monto: parseFloat(form.monto.value),
      fecha: form.fecha.value
    };

    const resultado = await registrarGasto(gasto);
    if (resultado.success) {
      showNotification('Gasto registrado correctamente');
      window.location.hash = '#/gastos';
    } else {
      showNotification('Error al registrar el gasto', 'error');
    }
  });
</script>
