<link rel="stylesheet" href="../../assets/css/components/buttons.css">
<link rel="stylesheet" href="../../assets/css/components/forms.css">
<link rel="stylesheet" href="../../assets/css/components/tables.css">
<link rel="stylesheet" href="../../assets/css/views/inventario.css">
<section class="inventario-form">
  <h2>Registrar Producto</h2>

  <form id="form-registrar-inventario">
    <label for="nombre">Nombre:</label>
    <input type="text" id="nombre" name="nombre" required />

    <label for="categoria">Categor√≠a:</label>
    <input type="text" id="categoria" name="categoria" required />

    <label for="cantidad">Cantidad:</label>
    <input type="number" id="cantidad" name="cantidad" required min="0" />

    <label for="precio">Precio:</label>
    <input type="number" id="precio" name="precio" required step="0.01" min="0" />

    <button type="submit" class="btn-primary">Guardar</button>
  </form>
</section>

<script type="module">
  import { registrarProducto } from '../../assets/js/api/inventario.js';
  import { showNotification } from '../../assets/js/components/notifications.js';

  const form = document.getElementById('form-registrar-inventario');
  form.addEventListener('submit', async (e) => {
    e.preventDefault();

    const producto = {
      nombre: form.nombre.value,
      categoria: form.categoria.value,
      cantidad: parseInt(form.cantidad.value),
      precio: parseFloat(form.precio.value)
    };

    const resultado = await registrarProducto(producto);
    if (resultado.success) {
      showNotification('Producto registrado correctamente');
      window.location.hash = '#/inventario';
    } else {
      showNotification('Error al registrar', 'error');
    }
  });
</script>
